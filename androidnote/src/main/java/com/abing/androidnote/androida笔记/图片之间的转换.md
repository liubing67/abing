Drawable、Bitmap、byte[]之间的转换

最近有粉丝问，如果我想试试从Android部分获取一张图片在Unity中进行显示，需要将图片转换为byte[]格式，该怎么办呢？

借此机会，小编整理一下Android的图片转换，即Drawable、Bitmap、byte[]之间的转换，希望能给大家带来一些帮助。

1

Drawable → Bitmap
转成Bitmap对象后，可以将Drawable对象通过Android的SK库存成一个字节输出流，最终还可以保存成为jpg和png的文件。
转化方法有不少：
比如有一个Drawable da
BitmapDrawable bd = (BitmapDrawable) da;
Bitmap bm = bd.getBitmap();
最终bm就是我们需要的Bitmap对象了。
或者使用如下方式：
代码如下：

 public static Bitmap drawable2Bitmap(Drawable drawable)
    {
        Bitmap bitmap=Bitmap.createBitmap(drawable.getIntrinsicWidth(),drawable.getIntrinsicHeight(),drawable.getOpacity()!= PixelFormat.OPAQUE?Bitmap.Config.ARGB_8888:Bitmap.Config.RGB_565);
        Canvas canvas=new Canvas(bitmap);
        canvas.setBitmap(bitmap);
        drawable.setBounds(0,0,drawable.getIntrinsicWidth(),drawable.getIntrinsicHeight());
        drawable.draw(canvas);
        return bitmap;

    }

    2

    Bitmap → Drawable
    比如有一个Bitmap bm
    BitmapDrawable bd=new BitmapDrawable(bm);
    因为BtimapDrawable是Drawable的子类，最终直接使用bd对象即可。
    代码如下：
 public static Drawable Bitmap2Drawable(Bitmap bitmap)
    {
        BitmapDrawable bitmapDrawable=new BitmapDrawable(bitmap);
        return bitmapDrawable;
    }

    3

    从资源中获取Bitmap

     Resources resources=ctx.getResources();
            Bitmap bitmap=BitmapFactory.decodeResource(resources, R.drawable.ic_launcher);


4

Bitmap → byte[]
代码如下：

 private byte[] Bitmap2Bytes(Bitmap bitmap)
        {
            ByteArrayOutputStream baos=new ByteArrayOutputStream();
            bitmap.compress(Bitmap.CompressFormat.PNG,100,baos);

            return baos.toByteArray();
        }


        5

        byte[] → Bitmap
        代码如下：
          private Bitmap Byte2Bitmap(byte[] bytes)
            {
                if (bytes.length!=0)
                {
                    return BitmapFactory.decodeByteArray(bytes,0,bytes.length);
                }else {
                    return null;
                }
            }